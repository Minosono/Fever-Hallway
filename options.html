<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Optionen - FeverHallway</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Kleine, in-page Styles für das Options-Layout */
        body, html { height: 100%; margin: 0; background: #000; color: #fff; font-family: sans-serif; display:flex; align-items:center; justify-content:center; }
        #options-root { display:flex; flex-direction:column; gap:18px; align-items:center; width:90%; max-width:720px; padding:28px; background: rgba(10,10,10,0.6); border-radius:10px; }
        label { font-size:18px; letter-spacing:1px; }
        input[type="range"] { width:100%; }
        .btn-row { display:flex; gap:12px; margin-top:6px; }
        .ghost-btn { background:none; border:1px solid rgba(255,255,255,0.2); color:#fff; padding:10px 16px; cursor:pointer; border-radius:6px; }
    </style>
</head>
<body>
    <div id="options-root">
        <h2>Optionen</h2>
        <div style="width:100%;">
            <label for="volume-slider">Hintergrundmusik Lautstärke</label>
            <input type="range" id="volume-slider" min="0" max="100" step="1">
        </div>
        <div class="btn-row">
            <button id="save-button" class="ghost-btn">Speichern & Zurück</button>
            <button id="cancel-button" class="ghost-btn">Abbrechen</button>
        </div>

        <!-- Vorschau-Audio (unsichtbar) -->
        <audio id="preview-audio" loop>
            <source src="music/soundtrack.mp4" type="audio/mp4">
        </audio>
    </div>

    <script>
        (function(){
            const slider = document.getElementById('volume-slider');
            const preview = document.getElementById('preview-audio');
            const saveBtn = document.getElementById('save-button');
            const cancelBtn = document.getElementById('cancel-button');

            const stored = parseFloat(localStorage.getItem('feverhallway_volume'));
            const initial = Number.isFinite(stored) ? stored : 0.5;
            slider.value = Math.round(initial * 100);
            preview.volume = initial;
            // autoplay preview if allowed
            preview.play().catch(()=>{ /* Stummschaltung/Autoplay-Policy evtl. blockiert */ });

            slider.addEventListener('input', (e) => {
                const v = e.target.value / 100;
                preview.volume = v;
            });

            saveBtn.addEventListener('click', () => {
                const v = slider.value / 100;
                localStorage.setItem('feverhallway_volume', v.toString());
                // Zurück zum Hauptmenü
                window.location.href = 'index.html';
            });

            cancelBtn.addEventListener('click', () => {
                window.location.href = 'index.html';
            });
        })();
    </script>
</body>
</html>
